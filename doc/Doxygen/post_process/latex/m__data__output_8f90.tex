\hypertarget{m__data__output_8f90}{}\section{m\+\_\+data\+\_\+output.\+f90 File Reference}
\label{m__data__output_8f90}\index{m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}}


Contains module \hyperlink{namespacem__data__output}{m\+\_\+data\+\_\+output}.  


\subsection*{Modules}
\begin{DoxyCompactItemize}
\item 
module \hyperlink{namespacem__data__output}{m\+\_\+data\+\_\+output}
\begin{DoxyCompactList}\small\item\em This module enables the restructuring of the raw simulation data file(s) into formatted database file(s). The formats that may be chosen from include Silo-\/\+H\+D\+F5 and Binary. Each of these database structures contains information about the grid as well as each of the flow variable(s) that were chosen by the user to be included. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine, public \hyperlink{namespacem__data__output_ab65b312ef83adb104cafafada9c998b6}{m\+\_\+data\+\_\+output\+::s\+\_\+initialize\+\_\+data\+\_\+output\+\_\+module} ()
\begin{DoxyCompactList}\small\item\em Computation of parameters, allocation procedures, and/or any other tasks needed to properly setup the module. \end{DoxyCompactList}\item 
subroutine, public \hyperlink{namespacem__data__output_ae767b4364e76ee05872868171fd2f05d}{m\+\_\+data\+\_\+output\+::s\+\_\+open\+\_\+formatted\+\_\+database\+\_\+file} (t\+\_\+step)
\begin{DoxyCompactList}\small\item\em This subroutine opens a new formatted database file, or replaces an old one, and readies it for the data storage of the grid and the flow variable(s) associated with the current time-\/step, t\+\_\+step. This is performed by all the local process(es). The root processor, in addition, must also generate a master formatted database file whose job will be to link, and thus combine, the data from all of the local process(es). Note that for the Binary format, this extra task that is assigned to the root process is not performed in multidimensions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
integer, dimension(\+:), allocatable \hyperlink{namespacem__data__output_a98d3ca969b0e32fa09436f1a9cfbd77c}{m\+\_\+data\+\_\+output\+::dims}
\begin{DoxyCompactList}\small\item\em For Silo-\/\+H\+D\+F5 database format, this variable is used to keep track of the number of cell-\/boundaries, for the grid associated with the local process, in each of the active coordinate directions. \end{DoxyCompactList}\item 
integer \hyperlink{namespacem__data__output_acc04177c6c6ab23be61767b187ece0ba}{m\+\_\+data\+\_\+output\+::dbvars}
\begin{DoxyCompactList}\small\item\em The total number of flow variable(s) to be stored in a formatted database file. Note that this is only needed when using the Binary format. \end{DoxyCompactList}\end{DoxyCompactItemize}
\begin{Indent}\textbf{ Generic storage for flow variable(s) that are to be written to formatted}\par
{\em database file(s). Note that for 1D simulations, q\+\_\+root\+\_\+sf is employed to gather the flow variable(s) from all sub-\/domains on to the root process. If the run is not parallel, but serial, then q\+\_\+root\+\_\+sf is equal to q\+\_\+sf. }\begin{DoxyCompactItemize}
\item 
real(kind(0d0)), dimension(\+:,\+:,\+:), allocatable, public \hyperlink{namespacem__data__output_aa211f0ff6c5213825ff0d7fa0357ccef}{m\+\_\+data\+\_\+output\+::q\+\_\+sf}
\item 
real(kind(0d0)), dimension(\+:,\+:,\+:), allocatable, public \hyperlink{namespacem__data__output_a94a7c7e9bb108dc2d3360e1cd40d4909}{m\+\_\+data\+\_\+output\+::dft\+\_\+q\+\_\+sf}
\item 
real(kind(0d0)), dimension(\+:,\+:,\+:), allocatable \hyperlink{namespacem__data__output_a8a822ed22e0ffe582b2dc7f49109fa1d}{m\+\_\+data\+\_\+output\+::coarse\+\_\+x\+\_\+q\+\_\+sf}
\item 
real(kind(0d0)), dimension(\+:,\+:,\+:), allocatable \hyperlink{namespacem__data__output_a9d75551d2f262e079c3b6397404d5a79}{m\+\_\+data\+\_\+output\+::coarse\+\_\+xy\+\_\+q\+\_\+sf}
\item 
real(kind(0d0)), dimension(\+:,\+:,\+:), allocatable \hyperlink{namespacem__data__output_ac2d6c1c8ab5cc7a2762b462673086bbe}{m\+\_\+data\+\_\+output\+::coarse\+\_\+xyz\+\_\+q\+\_\+sf}
\item 
real(kind(0d0)), dimension(\+:,\+:,\+:), allocatable \hyperlink{namespacem__data__output_af74e742ddb67173d205d037902ce73f4}{m\+\_\+data\+\_\+output\+::q\+\_\+root\+\_\+sf}
\item 
real(kind(0d0)), dimension(\+:,\+:,\+:), allocatable \hyperlink{namespacem__data__output_a0a9ac4d26ce8ac2ea87cacf581b49692}{m\+\_\+data\+\_\+output\+::cyl\+\_\+q\+\_\+sf}
\item 
real(kind(0d0)), dimension(\+:,\+:,\+:), allocatable \hyperlink{namespacem__data__output_a6dbb29fcb50e8ca2140326f4ba85dd02}{m\+\_\+data\+\_\+output\+::cyl\+\_\+coarse\+\_\+q\+\_\+sf}
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ The spatial and data extents array variables contain information about the}\par
{\em minimum and maximum values of the grid and flow variable(s), respectively. The purpose of bookkeeping this information is to boost the visualization of the Silo-\/\+H\+D\+F5 database file(s) in Vis\+It. }\begin{DoxyCompactItemize}
\item 
real(kind(0d0)), dimension(\+:,\+:), allocatable \hyperlink{namespacem__data__output_a20a29bb6bd9724b83d4abab91f1b99a3}{m\+\_\+data\+\_\+output\+::spatial\+\_\+extents}
\item 
real(kind(0d0)), dimension(\+:,\+:), allocatable \hyperlink{namespacem__data__output_a10cecf686032e4df4cd0b9835b159d07}{m\+\_\+data\+\_\+output\+::data\+\_\+extents}
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ The size of the ghost zone layer at beginning of each coordinate direction}\par
{\em (lo) and at end of each coordinate direction (hi). Adding this information to Silo-\/\+H\+D\+F5 database file(s) is recommended since it supplies Vis\+It with connectivity information between the sub-\/domains of a parallel data set. }\begin{DoxyCompactItemize}
\item 
integer, dimension(\+:), allocatable \hyperlink{namespacem__data__output_a4b7e6567b3bb7fdd4384180d1a7475af}{m\+\_\+data\+\_\+output\+::lo\+\_\+offset}
\item 
integer, dimension(\+:), allocatable \hyperlink{namespacem__data__output_a1a779679774e1161511609f18e8d9c27}{m\+\_\+data\+\_\+output\+::hi\+\_\+offset}
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Locations of various folders in the case\textquotesingle{}s directory tree, associated with}\par
{\em the choice of the formatted database format. These include, in order, the location of the folder named after the selected formatted database format, and the locations of two sub-\/directories of the latter, the first of which is named after the local processor rank, while the second is named \textquotesingle{}root\textquotesingle{}. The folder associated with the local processor rank contains only the data pertaining to the part of the domain taken care of by the local processor. The root directory, on the other hand, will contain either the information about the connectivity required to put the entire domain back together, or the actual data associated with the entire computational domain. This all depends on dimensionality and the choice of the formatted database format. }\begin{DoxyCompactItemize}
\item 
character(len=path\+\_\+len+name\+\_\+len) \hyperlink{namespacem__data__output_a5b3bbbc3392c3196bee8219d550fd9aa}{m\+\_\+data\+\_\+output\+::dbdir}
\item 
character(len=path\+\_\+len+2 $\ast$name\+\_\+len) \hyperlink{namespacem__data__output_a135059f1848c713ebe5156659da1929a}{m\+\_\+data\+\_\+output\+::proc\+\_\+rank\+\_\+dir}
\item 
character(len=path\+\_\+len+2 $\ast$name\+\_\+len) \hyperlink{namespacem__data__output_ae33b2fd4aa2594f18dd34e20b66813bb}{m\+\_\+data\+\_\+output\+::rootdir}
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Handles of the formatted database master/root file, slave/local processor}\par
{\em file and options list. The list of options is explicitly used in the Silo-\/ H\+D\+F5 database format to provide additional details about the contents of a formatted database file, such as the previously described spatial and data extents. }\begin{DoxyCompactItemize}
\item 
integer \hyperlink{namespacem__data__output_a5cd7e79fd8f57db6362eeae681f8a9d8}{m\+\_\+data\+\_\+output\+::dbroot}
\item 
integer \hyperlink{namespacem__data__output_aec51d3900a580048a3c9f5bddfa38ed2}{m\+\_\+data\+\_\+output\+::dbfile}
\item 
integer \hyperlink{namespacem__data__output_a21c768216c63e43ea9e1f13e498a3558}{m\+\_\+data\+\_\+output\+::optlist}
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Generic error flags utilized in the handling, checking and the reporting}\par
{\em of the input and output operations errors with a formatted database file }\begin{DoxyCompactItemize}
\item 
integer, private \hyperlink{namespacem__data__output_a9200025029de298307a47699927a60fa}{m\+\_\+data\+\_\+output\+::err}
\item 
integer, private \hyperlink{namespacem__data__output_afa88ae36e1e20ff64867261ef6c9be15}{m\+\_\+data\+\_\+output\+::ierr}
\end{DoxyCompactItemize}
\end{Indent}
\begin{Indent}\textbf{ Bookkeeping variables storing the name and type of mesh that is}\par
{\em The general objective of this subroutine is to write the necessary grid data to the formatted database file, for the current time-\/step, t\+\_\+step. The local processor will write the grid data of the domain segment that it is in charge of to the formatted database slave file. The root process will additionally take care of linking that grid data in the formatted database master file. In the Silo-\/ H\+D\+F5 database format, the spatial extents of each local process grid are also written to the master file. In the Binary format, note that no master file is maintained in multidimensions. Finally, in 1D, no grid data is written within this subroutine for the Silo-\/\+H\+D\+F5 format because curve objects rather than quadrilateral meshes are used. For curve objects, in contrast to the quadrilateral mesh objects, the grid data is included side by side with the flow variable data. Then, in this case, we take care of writing both the grid and the flow variable data in the subroutine s\+\_\+write\+\_\+variable\+\_\+to\+\_\+formatted\+\_\+database\+\_\+file.


\begin{DoxyParams}{Parameters}
{\em t\+\_\+step} & Time-\/step that is currently being post-\/processed \\
\hline
\end{DoxyParams}
}\begin{DoxyCompactItemize}
\item 
character(len=4 $\ast$name\+\_\+len), dimension(num\+\_\+procs) \hyperlink{m__data__output_8f90_a6072065026442573b37ac7e4bbd0bc25}{meshnames}
\item 
integer, dimension(num\+\_\+procs) \hyperlink{m__data__output_8f90_ab445dfab128e2e9f8b7e51f51f54c095}{meshtypes}
\end{DoxyCompactItemize}
\end{Indent}
\textbf{ }\par
\begin{DoxyCompactItemize}
\item 
integer \hyperlink{m__data__output_8f90_aaea4baed8fd8b780f6938f0dc1fb0f72}{i}
\begin{DoxyCompactList}\small\item\em Time-\/step that is currently being post-\/processed. \end{DoxyCompactList}\end{DoxyCompactItemize}

\begin{Indent}\textbf{ Bookkeeping variables storing the name and type of flow variable}\par
{\em The goal of this subroutine is to write to the formatted database file the flow variable at the current time-\/step, t\+\_\+step. The local process(es) write the part of the flow variable that they handle to the formatted database slave file. The root process, on the other hand, will also take care of connecting all of the flow variable data in the formatted database master file. In the Silo-\/\+H\+D\+F5 database format, the extents of each local process flow variable are also written to the master file. Note that in Binary format, no master file is maintained in multidimensions. Finally note that in 1D, grid data is also written within this subroutine for Silo-\/\+H\+D\+F5 database format since curve and not the quadrilateral variable objects are used, see description of s\+\_\+write\+\_\+grid\+\_\+to\+\_\+formatted\+\_\+database\+\_\+file for more details on this topic.


\begin{DoxyParams}{Parameters}
{\em varname} & Name of the flow variable, which will be written to the formatted database file at the current time-\/step, t\+\_\+step \\
\hline
{\em t\+\_\+step} & Time-\/step that is currently being post-\/processed \\
\hline
\end{DoxyParams}
}\begin{DoxyCompactItemize}
\item 
character(len=4 $\ast$name\+\_\+len), dimension(num\+\_\+procs) \hyperlink{m__data__output_8f90_abef5dbfec3461a8726fd983ab5e7afb8}{varnames}
\item 
integer, dimension(num\+\_\+procs) \hyperlink{m__data__output_8f90_a36cb070ec6a82e3a699ac20c28f1138e}{vartypes}
\end{DoxyCompactItemize}
\end{Indent}
\begin{DoxyCompactItemize}
\item 
integer \hyperlink{m__data__output_8f90_aeadbc0ce9b66517f8fde156199772ec1}{j}
\item 
integer \hyperlink{m__data__output_8f90_af22c486581933c52df7d4aa306382074}{k}
\item 
subroutine \hyperlink{namespacem__data__output_ae32f7bdb38c6c216a819fb0b3a7e06cd}{m\+\_\+data\+\_\+output\+::s\+\_\+coarsen\+\_\+variable} ()
\begin{DoxyCompactList}\small\item\em The purpose of this subroutine is to coarsen any variable that is to be written to the formatted database file by averaging every two cells together into a single value. This averaging is done separately in each dimension. \end{DoxyCompactList}\item 
subroutine, public \hyperlink{namespacem__data__output_a9ab4e5bfbf085c126a58c78383d38fa7}{m\+\_\+data\+\_\+output\+::s\+\_\+close\+\_\+formatted\+\_\+database\+\_\+file} ()
\begin{DoxyCompactList}\small\item\em The purpose of this subroutine is to close any formatted database file(s) that may be opened at the time-\/step that is currently being post-\/processed. The root process must typically close two files, one associated with the local sub-\/domain and the other with the entire domain. The non-\/ root process(es) must close one file, which is associated with the local sub-\/domain. Note that for the Binary data-\/ base format and multidimensional data, the root process only has to close the file associated with the local sub-\/ domain, because one associated with the entire domain is not generated. \end{DoxyCompactList}\item 
subroutine, public \hyperlink{namespacem__data__output_a02f2b04a434c1f0ebf9156147d0f976e}{m\+\_\+data\+\_\+output\+::s\+\_\+finalize\+\_\+data\+\_\+output\+\_\+module} ()
\begin{DoxyCompactList}\small\item\em Deallocation procedures for the module. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Contains module \hyperlink{namespacem__data__output}{m\+\_\+data\+\_\+output}. 

\begin{DoxyAuthor}{Author}
S. Bryngelson, K. Schimdmayer, V. Coralic, J. Meng, K. Maeda, T. Colonius 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
J\+U\+NE 06 2019 
\end{DoxyDate}


\subsection{Variable Documentation}
\mbox{\Hypertarget{m__data__output_8f90_aaea4baed8fd8b780f6938f0dc1fb0f72}\label{m__data__output_8f90_aaea4baed8fd8b780f6938f0dc1fb0f72}} 
\index{m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}!i@{i}}
\index{i@{i}!m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}}
\subsubsection{\texorpdfstring{i}{i}}
{\footnotesize\ttfamily integer i}



Time-\/step that is currently being post-\/processed. 



Definition at line 666 of file m\+\_\+data\+\_\+output.\+f90.

\mbox{\Hypertarget{m__data__output_8f90_aeadbc0ce9b66517f8fde156199772ec1}\label{m__data__output_8f90_aeadbc0ce9b66517f8fde156199772ec1}} 
\index{m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}!j@{j}}
\index{j@{j}!m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}}
\subsubsection{\texorpdfstring{j}{j}}
{\footnotesize\ttfamily integer j}



Definition at line 902 of file m\+\_\+data\+\_\+output.\+f90.

\mbox{\Hypertarget{m__data__output_8f90_af22c486581933c52df7d4aa306382074}\label{m__data__output_8f90_af22c486581933c52df7d4aa306382074}} 
\index{m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}!k@{k}}
\index{k@{k}!m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}}
\subsubsection{\texorpdfstring{k}{k}}
{\footnotesize\ttfamily integer k}



Definition at line 902 of file m\+\_\+data\+\_\+output.\+f90.

\mbox{\Hypertarget{m__data__output_8f90_a6072065026442573b37ac7e4bbd0bc25}\label{m__data__output_8f90_a6072065026442573b37ac7e4bbd0bc25}} 
\index{m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}!meshnames@{meshnames}}
\index{meshnames@{meshnames}!m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}}
\subsubsection{\texorpdfstring{meshnames}{meshnames}}
{\footnotesize\ttfamily character(len = 4$\ast$name\+\_\+len), dimension(num\+\_\+procs) meshnames}



Definition at line 662 of file m\+\_\+data\+\_\+output.\+f90.

\mbox{\Hypertarget{m__data__output_8f90_ab445dfab128e2e9f8b7e51f51f54c095}\label{m__data__output_8f90_ab445dfab128e2e9f8b7e51f51f54c095}} 
\index{m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}!meshtypes@{meshtypes}}
\index{meshtypes@{meshtypes}!m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}}
\subsubsection{\texorpdfstring{meshtypes}{meshtypes}}
{\footnotesize\ttfamily integer, dimension(num\+\_\+procs) meshtypes}



Definition at line 663 of file m\+\_\+data\+\_\+output.\+f90.

\mbox{\Hypertarget{m__data__output_8f90_abef5dbfec3461a8726fd983ab5e7afb8}\label{m__data__output_8f90_abef5dbfec3461a8726fd983ab5e7afb8}} 
\index{m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}!varnames@{varnames}}
\index{varnames@{varnames}!m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}}
\subsubsection{\texorpdfstring{varnames}{varnames}}
{\footnotesize\ttfamily character(len = 4$\ast$name\+\_\+len), dimension(num\+\_\+procs) varnames}



Definition at line 898 of file m\+\_\+data\+\_\+output.\+f90.

\mbox{\Hypertarget{m__data__output_8f90_a36cb070ec6a82e3a699ac20c28f1138e}\label{m__data__output_8f90_a36cb070ec6a82e3a699ac20c28f1138e}} 
\index{m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}!vartypes@{vartypes}}
\index{vartypes@{vartypes}!m\+\_\+data\+\_\+output.\+f90@{m\+\_\+data\+\_\+output.\+f90}}
\subsubsection{\texorpdfstring{vartypes}{vartypes}}
{\footnotesize\ttfamily integer, dimension(num\+\_\+procs) vartypes}



Definition at line 899 of file m\+\_\+data\+\_\+output.\+f90.

